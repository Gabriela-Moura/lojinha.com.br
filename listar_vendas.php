<?php


############################################
#                                                  
#                 Rian Rafael NÂº29                  
#                                                  
#   â €â €â €â €â €â €â €â €â €â €â €â €â¢€â¢¶â¡¿â ¿â£·â¡„â €â €â €â €â €â €â €â €â €â €              
#   â €â €â €â£€â €â €â €â €â €â €â €â €â ¸â£»â£‡â£ â£»â¡‡â €â €â €â €â €â €â €â €â£€â €â €â €    
#   â €â£ â£¾â¢¯â£§â¡„â €â €â €â €â €â¡ â£´â£Ÿâ£¾â£½â¡·â£¶â£„â €â €â €â €â €â¢€â£´â£½â£³â£¦â¡€  
#   â£¼â¢¿â£¼â£¿â£»â¢¿â¡„â €â €â €â €â¢§â£Ÿâ£»â£»â£œâ£»â£§â£»â €â €â €â €â¢€â£¼â¢¿â£¼â£§â£Ÿâ£¿  
#   â ˆâ ³â£Ÿâ¢¾â£½â »â£Ÿâ£¦â €â €â €â €â ˆâ¢¹â¢¹â ‰â£Ÿâ Šâ €â €â €â €â¢°â£µâ¡¿â£«â£Ÿâ£¾â â €  
#   â €â €â ˆâ ™â¢½â£·â£‰â¢¿â¡€â¡”â£â¢£â¢¿â ²â¢»â¢¶â¢¶â »â£¥â£“â¢‚â£€â£¼â£‹â£¼â£·â ›â €â €â €
#   â €â €â €â €â €â €â ˆâ¡«â£±â ªâ¢³â¡¼â ¦â “â šâ šâ šâ ²â¢â œâ£µâ£¦â¡šâ¡‰â €â €â €â €â €â €  
#   â €â €â €â €â €â  â£…â¢â ªâ£²â¡‹â €â£€â¢ â£´â ¶â ²â£€â£ â ½â¢¯â¡”â µâ¡¬â¢„â €â €â €â €â €  
#   â €â €â €â €â €â¡¸â¡â¡•â¡¾â ˜â Ÿâ£¿â¡™â ¿â¢˜â¡­â¢­â¡­â¢–â£›â €â¢»â ”â£»â °â „â €â €â €â €  
#   â €â €â €â¢ â šâ “â¢³â£¶â ƒâ €â °â¡¾â£™â£©â ¶â –â£’â£Šâ¡¥â ¶â£‚â €â£¯â£½â¡—â ’â ‚â €â €â €  
#   â €â €â €â ˜â¢¤â °â£¾â¡¿â¡„â €â €â¢£â¢‹â¡­â¢–â£’â£›â£‹â¡¥â¢–â£«â¡€â£Ÿâ¡¿â¡‡â  â „â €â €â €  
#   â¢ â¡€â €â €â ˆâ ¤â¢â ¯â£¡â €â €â â£œâ¢šâ¡­â¡–â£²â¡·â¢â£«â ”â£¾â£¨â£¸â£â ‡â €â €â €â¡„  
#   â¢¸â¡·â£„â¡€â €â ‘â¡Šâ¢¿â¢‡â£³â£„â €â¢¸â â €â ‹â ¥â –â ‰â¢€â ´â¡±â¡¦â £â „â €â¢€â£ â¡¾â£·  
#   â¢¸â£Ÿâ¡™â£¿â †â €â ˆâ ¤â ‘â¢¿â£Ÿâ¢³â¡¦â¢¶â£¤â£¤â¢¤â¡”â£¾â£›â£¿â –â¡â ƒâ €â ²â¢¿â¡›â¢¼â¡Ÿ
#   â ˆâ Ÿâ ³â¡â£¦â €â£ â¢â …â ¡â¢¯â¢›â£¿â ¾â£¢â ¾â ¼â£¾â¡â¡â â ˜â¢½â¢¦â¡€â£ â£Ÿâ¡¼â¢»â …
#   â €â €â €â ¹â£œâ¢·â£•â â €â €â €â €â €â ‘â£¼â£€â “â ˆâ €â €â €â €â €â£¹â¡Ÿâ££â â €â €â €  
#   â €â €â €â£´â ›â¢³â¡â¢³â£¶â£¤â¡„â €â €â£´â¡Ÿâ£¿â£§â¡„â €â¢ â£¤â£´â£¿â¢©â¡â ‹â¢³â¡„â €â €
#   â €â €â Ÿâ â €â €â ™â ·â£­â£›â ¿â »â£Ÿâ£¯â â£·â¢¯â£¿â »â¢¯â£›â£­â â ‹â â €â â â †â €  
#   â €â €â €â €â €â €â €â €â €â ‰â ›â ›â ¶â£¶â£„â£»â£¯â ·â Ÿâ ‹â ‰â €â €â €â €â €â €â €â €â €    
#   â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ ³â ¿â â €â €â €â €â €â €â €â €â €â €â €â €â €    
#                                        
###########################################


##########################################
#   Samuel Augusto Barbosa nÂº30   #
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â£ â£¤â¡„â €â €â €â €â €â €â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â£´â£¿â£¿â ¿â “â €â €â €â €â €â €â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£°â£¿â£¿â¡Ÿâ â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡€
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£°â ƒâ €â €â €â €â €â €â €â €â£¸â£¿â£¿â¡Ÿâ €â¢€â¡†â €â €â €â €â €â €â¢€â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡¼â €â …â €â €â €â €â¢€â¡„â €â €â €â£¿â£¿â£¿â£—â£ â£¾â¡‡â €â €â €â €â¢ â †â €â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â¡‡â €â €â €â €â €â €â¢¸â£†â €â €â¢°â£¿â£¿â£¿â£¿â£¿â£¯â €â¢€â£´â †â €â »â ‚â €â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡¼â£·â €â €â €â €â €â €â¢¸â£¿â €â¢€â£¾â£¿â£¿â£¿â£¿â£¿â¡¿â£¥â£¾â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢»â£¿â¡†â €â €â£€â£´â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â â¢¹â£¿â €â €â €â£´â ƒâ €â£ â¡†â¢€â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â ±â£„â €â €â €â €â ˆâ£¿â¡‡â €â¢°â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ƒâ €â ˜â â €â €â£°â£¿â €â¢°â Ÿâ €â£¤â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â£¿â €â €â ™â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â €â¢€â â €â¢€â£°â£¿â£¿â¡¿â †â ˆâ €â£°â£·â¡„â €â €â €â €
#â €â €â €â €â €â ˜â¢¿â£¦â£„â €â €â €â €â €â €â €â €â €â¡¾â£§â¡œâ €â£ â£¿â£¿â£¿â£¿â¡¿â ‹â£¹â£¿â£¿â£¿â Ÿâ¢¸â£¿â£¦â£´â£¿â£¿â£¿â¡¿â â €â €â£¾â£¿â£¿â â €â €â €â €
#â €â €â €â €â¢€â €â €â¢¹â£¿â£§â €â €â €â €â¡€â¢€â£¾â¢€â£¿â£¿â£¿â£¾â£¿â£¿â£¿â£¿â ›â â¢ â ¿â Ÿâ ‰â â €â¢¸â£¹â£¿â£¿â ›â »â£¯â â €â €â£€â£¿â ¿â â €â €â €â£†â¢¹
#â €â €â °â£„â ¸â£·â¡„â €â¢¿â£Ÿâ €â €â €â €â£·â¡€â£‡â €â£¿â£¿â ¿â£¿â ›â£¿â â €â €â¡„â €â¢€â£´â¡¾â â €â£¼â£¿â¡¿â â €â â£¿â¡„â €â£°â ‹â €â €â£ºâ €â €â €â¢¹â£˜
#â €â €â  â£½â£¶â¡¿â ‡â €â €â¢‰â €â ¶â ’â €â ˜â¢·â£¿â£¥â ˆâ ¿â €â ˜â¢†â ˜â €â¢ â£¿â¡â €â£¾â£¿â ƒâ €â£¸â¢¿â£¿â£‡â£€â €â¢€â£¿â¡‡â €â¡˜â €â €â ¸â£¿â €â €â €â¢¸â 
#â €â €â €â ˜â ‹â¢€â €â£„â €â£†â â£¾â£¿â£§â €â ˜â£¿â£¿â£¦â¢¸â£¦â €â ˆâ£¤â£¼â£¿â£¿â£¿â£¾â¡¿â â €â ˆâ£ â£¾â£¿â£¿â£¿â£¿â£¿â£¿â¡‡â¢€â£§â €â ²â£€â£¿â¡†â €â â €â €
#â €â €â €â €â¡¶â¢ â£¾â¡¿â ·â ¿â¢·â£¿â£¿â£¿â ‡â €â ‹â¢¹â£¿â£¶â£¿â£·â£¶â£¿â£¿â£¿â ‹â ‰â£¿â ƒâ €â¢€â£¾â£¿â£¿â£¿â£¿â¡¿â »â ™â ¿â¡‡â ˆâ£¿â â €â£¿â â €â €â €â €â €
#â €â €â €â €â¡€â ™â¡â ¶â£¿â¡¿â¢’â£ â €â¡¤â €â¢â €â ¸â£¿â£¿â£¿â£¿â£¿â¡Ÿâ ‰â¢¿â €â¢¸â£¿â¡€â €â¢¸â£¿â£¿â£¿â Ÿâ â €â €â €â €â¢±â €â â  â ”â â €â €â €â €â €â €
#â €â €â£¶â €â¡‡â¢„â ˜â ²â£¦â °â Ÿâ ‰â ’â ²â¡„â €â â¢¸â£¿â Ÿâ â¢¸â Ÿâ¢£â €â »â¡€â ˜â¢¿â£¿â£¿â£¿â£¿â£¿â â €â €â €â €â €â €â ˜â¡†â €â£¶â ƒâ£°â¡†â €â €â €â €â €
#â ‚â €â£¿â£¦â ˆâ ˆâ ›â¢¶â£¦â €â¡¸â¡€â €â €â¡¸â €â €â ˆâ â €â °â ƒâ €â¢¸â£„â €â ˜â ‚â¡€â¢»â£¿â¡¿â Ÿâ €â¢¤â €â €â €â €â €â €â¢°â —â¢ â¡¯â¢°â£¿â â €â €â €â €â €
#â €â£¼â£¿â¡¿â â €â ˆâ¢€â£„â €â ·â£¬â£‘â¡¨â£´â¡‡â£´â €â¢€â£„â£ â£¤â£´â£¿â£¾â£·â¢„â¡€â €â ˆâ €â €â ˆâ “â ‹â €â €â €â €â¢€â£¼â â €â£¸â¡‡â¢¨â¡â €â €â €â €â €â €
#â €â¢«â£¿â¡ƒâ €â¢°â£¿â£¦â£…â¡€â ›â ¶â ¶â ¶â Œâ â €â €â €â €â ‰â ‰â£¿â£¹â£¿â ‰â ™â£Œâ €â €â €â €â €â €â €â €â €â¢€â£¤â¡â â €â£°â¢«â¡‡â ˆâ €â €â €â €â €â €â €
#â €â €â ˆâ ‡â ˜â ˜â¢¿â£¥â£€â ‰â ›â£¿â£·â£¶â£¿â£¿â¡Ÿâ¢€â£´â ‚â €â €â €â ¹â£¿â£§â¡€â €â ™â¢¦â¡€â €â €â¢¦â£„â£¤â£¨â£­â£¤â£ â ´â ‹â €â ¸â â €â¢¦â¡€â €â €â €â €â €
#â €â €â €â €â €â €â €â£¬â£™â¡›â “â ’â¢’â¢€â£¤â €â£„â »â£¿â£„â €â €â €â¢€â£¿â£¿â£½â£¦â¡€â €â €â ³â£„â¡€â €â ˆâ ›â ›â ›â â €â¡ â â â €â »â£¦â¡¹â£¦â¡â¢„â €â €
#â €â €â €â €â €â €â €â €â ‰â ‰â ‰â£»â Ÿâ£›â£ƒâ£¸â£¿â¡‡â£¹â£¿â¡·â €â£ â Ÿâ¢»â£¿â¢¿â ›â ‹â ƒâ¡„â €â ˆâ¢¿â£¶â£¶â ¦â¢¶â¡–â †â¢â£„â â¢¿â£·â£„â ˆâ »â£Œâ¢»â£†â ¡â¡€
#â €â €â €â €â €â €â €â €â €â €â¢ â¢‹â£¼â£¿â£¿â¡¿â ™â¢â£¾â£¿â¡‡â €â €â£ â£¾â£¿â €â €â €â£´â ƒâ €â£€â£€â¡ˆâ ‰â ›â¢·â£¾â €â »â£¿â£·â£„â ™â ›â£¡â£„â¡¹â£§â ¹â¡‡â¢±
#â €â €â €â €â €â €â €â €â €â €â¢¸â ˜â —â£ â£Œâ ›â €â ¹â ¿â ¿â£‡â €â €â »â ¿â ‹â €â €â ‹â â¡”â šâ ‰â£‰â¡‹â â €â €â¢Ÿâ €â €â ˆâ »â£¿â ‡â£€â ˆâ ›â¢›â£¿â¡—â¢ƒâ¡Œ
#â €â €â €â €â €â €â €â €â €â£ â£¾â¢›â£´â£¿â£¿â£§â °â£·â¢°â¡†â£¶â¢ â €â °â£¦â£¤â£¤â£´â ¶â ‰â €â¢°â£¾â£¿â£¿â£¦â ˆâ €â €â €â €â €â €â ¨â¡˜â¢¿â£¿â£¿â£¿â£¿â ‡â¡¼â €
#â €â €â €â €â¢€â£€â£¤â ¶â¢Ÿâ£«â£´â£¿â£¿â£¿â£¿â â °â£¤â¡¤â ”â €â €â €â €â ‰â ‰â ‰â â €â €â €â ˆâ »â£¿â£¿â£¿â£·â£„â €â €â €â €â €â €â ˆâ ’â ¦â ­â ­â ¥â šâ €â €
#â €â €â ´â â£›â£­â£´â£¾â£¿â£¿â£¿â£¿â ¿â ›â£¡â¢¸â£·â£Œâ “â¡€â €â €â €â €â €â €â €â €â €â  â €â£¦â â£Œâ »â¢¿â£¿â£¿â£·â£¦â£¬â£“â¡’â ¤â ¤â €â €â €â €â €â €â €â €
#â €â €â ¤â£­â£­â£­â£­â£­â£­â£­â£­â â¢¶â¡ƒâ ‰â ˜â ¿â ¿â ˆâ¡â£ â£¾â£¿â£¿â¢¿â£·â£¶â£„â¡™â ‚â¢¾â£¿â €â Ÿâ£¡â£¤â£â¡›â »â¢¿â£¿â£¿â£¿â¡¿â ¶â¢’â €â €â €â €â €â €â €
#â €â €â €â €â €â ˆâ ‰â â €â €â €â €â ˆâ¢¿â£¤â£€â£€â£¦â ¿â ›â ‰â¢â¡€â €â¢€â£€â¡€â ™â ¹â ¿â£·â£¦â£¤â£â£¿â£¿â Ÿâ €â ˜â “â ²â ¶â ¶â ’â ‹â â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ “â ‹â£¡â¡´â¢â£´â£¿â£¿â£¦â£¶â£¿â£·â£„â €â¢¶â£¤â£­â â ›â ›â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ¢â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â „â ›â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
#â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ ›â ¿â ¿â Ÿâ »â ¿â ¿â Ÿâ ‹â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
##########################################
require_once "Venda.php";
require_once "Produto.php";


$vendasFile="vendas.json";
$clientesFile="clientes.json";
                                               
// Carregar arquivos  
$vendasJSON = json_decode(file_get_contents($vendasFile),true);
$clientes = json_decode(file_get_contents($clientesFile),true);


// Ãndice de clientes
$clientesIndex = [];
foreach($clientes as $c) {
    $clientesIndex[$c['idPessoa']] = $c['nome'];
}
?>


<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Lista de Vendas</title>
    <link rel="stylesheet" href="estilo.css">
</head>
<body class="bodyVendas">
    <h1>ğŸ“„Vendas Registradas </h1>


    <?php if (count($vendasJSON) === 0): ?>
        <p> Nenhuma venda registrada. </p>
        <?php else: ?>
            <table class="tableVendas" border="1" cellpadding="5">
<tr>
    <th class="thVendas">ID venda</th>
    <th class="thVendas">Cliente</th>
    <th class="thVendas">Data</th>
    <th class="thVendas">Itens</th>
    <th class="thVendas">Total(R$)</th>
        </tr>


    <?php foreach ($vendasJSON as $v):?>
        <?php $venda= Venda::fromArray($v); ?>
        <tr>
            <td class="tdVendas"><?=$venda->getId()?></td>
            <td class="tdVendas"><?=$clientesIndex[$venda->getIdPessoa()]??"Cliente nÃ£o encontrado"?></td>
            <td class="tdVendas"><?=$venda->getData()?></td>
            <td class="tdVendas">
                <ul class="ulVendas">
                    <?php foreach ($venda->getItens() as $item): ?>
                        <li class="liVendas"><?= $item->getNome() ?> (R$<?= number_format($item->getPreco(),2,',','.') ?>)</li>
                        <?php endforeach; ?>
                </ul>
            </td>
            <td class="tdVendas"><b>R$<?=number_format($venda->getTotal(),2,',','.')?></b></td>
        </tr>
    <?php endforeach; ?>
</table>
<?php endif; ?>
<br>
<a href="index.html">ğŸ”™ Voltar ao Menu</a>
</body>
</html>
